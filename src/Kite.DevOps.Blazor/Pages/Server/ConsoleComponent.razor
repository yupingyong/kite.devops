@using Kite.DevOps.Application.Contracts.Server
@using Kite.DevOps.Application.Contracts.Server.Dtos

<Console Items="@ConsoleMessages" IsAutoScroll="true" Height="650" />
<BootstrapInput @bind-Value="CommandText" PlaceHolder="请输入命令行" OnEnterAsync="OnEnterAsync" />
@code {
    //控制台输入信息
    private List<ConsoleMessageItem> ConsoleMessages { get; set; } = new List<ConsoleMessageItem>();
    //命令行文本
    private string CommandText { get; set; }

    [Parameter]
    public ServerDto Server { get; set; }

    protected override void OnInitialized()
    {
        base.OnInitialized();
        CommandText = Server.Host;
    }

    private Task OnEnterAsync(string val)
    {
        ConsoleMessages.Add(new ConsoleMessageItem() 
        {
            Message=val
        });
        CommandText = "";
        StateHasChanged();
        return Task.CompletedTask;
    }
}
